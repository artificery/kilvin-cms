
{% extends "kilvin::installer._page" %}

{% block mainContent %}

    <h1>Settings Form</h1>

    <p class="red"><strong>Note: </strong> If you have questions or problems,
    please visit our <a href="https://kilvincms.com/support/">Support</a> page for assistance.</p>

    {% if errors %}

        <h2>Errors Found!</h2>

        <div class='border'><p><strong>Please correct the errors and resubmit the form</strong></p></div>

        <ul class="errorsList">
            {% for error in errors %}
                <li>
                    - {{error | raw}}
                </li>
            {% endfor %}
        </ul>
    {% endif %}

    <form method='post' action='/installer/perform-install'>
    {{ csrfField() }}

    <div class="shade settingsArea">
        <div class="settingHead">Site Details</div>


        <!-- SITE SETTINGS -->

        <h5>Name of your site</h5>

        <p><input type='text' name='site_name' value='{{site_name}}' size='40' class='input'></p>



        <h5>URL for your Site</h5>
        <p>Do not include the index page in the URL (ex: https://mysite.com/)</p>

        <p><input type='text' name='site_url' value='{{site_url}}' size='60'  class='input'></p>
    </div>


    <!-- DATABASE SETTINGS -->


    <div class="shade">
        <div class="settingHead">Database Settings</div>

        <h5>Database Server Hostname</h5>
        <p>Typically you will use '127.0.0.1', but your hosting provider may require something else</p>
        <p><input type='text' name='db_host' value='{{db_host}}' size='40' class='input' /></p>

        <h5>Database Server Port</h5>
        <p>The standard port for MySQL and MariaDB is '3306'</p>
        <p><input type='text' name='db_port' value='{{db_port}}' size='40' class='input' /></p>


        <h5>Database Username</h5>
        <p>The username you use to access your database</p>
        <p><input type='text' name='db_username' value='{{db_username}}' size='40' class='input' /></p>


        <h5>Database Password</h5>
        <p>The password you use to access your database</p>
        <p><input type='text' name='db_password' value='{{db_password}}' size='40' class='input' /></p>


        <h5>Database Name</h5>
        <p>The name of the database where you want Kilvin CMS installed.</p>
        <p class="red">Note: Installer will <b>not</b> create a database for you, so database must already exist.</p>
        <p><input type='text' name='db_database' value='{{db_database}}' size='40' class='input' /></p>

    </div>


    <!--INITIAL ADMIN ACCOUNT -->


    <div class="shade">
        <div class="settingHead">Administrator Account</div>

        <p>You will use these settings to access the Kilvin CMS control panel</p>

        <h5>Email Address</h5>

        <p><input type='text' name='email' value='{{email}}' size='40' maxlength='50' class='input' /></p>

        <h5>Password</h5>
        <p><span class=''>Must be at least 10 characters</span></p>
        <p style="font-size: 0.9em;">Password Strength: <span style="font-weight: bold;" id="js-password-strength">Non-existent.</span></p>
        <p><input type='text' name='password' value='{{password}}' size='40' maxlength='40' class='input' /></p>

        <h5>Screen Name</h5>
        <p>The name for your account. Will be displayed as the author of your entries.</p>
        <p><input type='text' name='screen_name' value='{{screen_name}}' size='40' maxlength='50' class='input' /></p>

    </div>


    <div class="shade">
    <div class="settingHead">Localization Settings</div>


    <h5>Site's Timezone</h5>

        <p>
            <select name='site_timezone' class='select'>
    <option value="Pacific/Midway">(UTC-11:00) Midway Island</option>
    <option value="Pacific/Samoa">(UTC-11:00) Samoa</option>
    <option value="Pacific/Honolulu">(UTC-10:00) Hawaii</option>
    <option value="US/Alaska">(UTC-09:00) Alaska</option>
    <option value="America/Los_Angeles">(UTC-08:00) Pacific Time (US &amp; Canada)</option>
    <option value="America/Tijuana">(UTC-08:00) Tijuana</option>
    <option value="US/Arizona">(UTC-07:00) Arizona</option>
    <option value="America/Chihuahua">(UTC-07:00) Chihuahua</option>
    <option value="America/Chihuahua">(UTC-07:00) La Paz</option>
    <option value="America/Mazatlan">(UTC-07:00) Mazatlan</option>
    <option value="US/Mountain">(UTC-07:00) Mountain Time (US &amp; Canada)</option>
    <option value="America/Managua">(UTC-06:00) Central America</option>
    <option value="US/Central">(UTC-06:00) Central Time (US &amp; Canada)</option>
    <option value="America/Mexico_City">(UTC-06:00) Guadalajara</option>
    <option value="America/Mexico_City">(UTC-06:00) Mexico City</option>
    <option value="America/Monterrey">(UTC-06:00) Monterrey</option>
    <option value="Canada/Saskatchewan">(UTC-06:00) Saskatchewan</option>
    <option value="America/Bogota">(UTC-05:00) Bogota</option>
    <option value="US/Eastern">(UTC-05:00) Eastern Time (US &amp; Canada)</option>
    <option value="US/East-Indiana">(UTC-05:00) Indiana (East)</option>
    <option value="America/Lima">(UTC-05:00) Lima</option>
    <option value="America/Bogota">(UTC-05:00) Quito</option>
    <option value="Canada/Atlantic">(UTC-04:00) Atlantic Time (Canada)</option>
    <option value="America/Caracas">(UTC-04:30) Caracas</option>
    <option value="America/La_Paz">(UTC-04:00) La Paz</option>
    <option value="America/Santiago">(UTC-04:00) Santiago</option>
    <option value="Canada/Newfoundland">(UTC-03:30) Newfoundland</option>
    <option value="America/Sao_Paulo">(UTC-03:00) Brasilia</option>
    <option value="America/Argentina/Buenos_Aires">(UTC-03:00) Buenos Aires</option>
    <option value="America/Argentina/Buenos_Aires">(UTC-03:00) Georgetown</option>
    <option value="America/Godthab">(UTC-03:00) Greenland</option>
    <option value="America/Noronha">(UTC-02:00) Mid-Atlantic</option>
    <option value="Atlantic/Azores">(UTC-01:00) Azores</option>
    <option value="Atlantic/Cape_Verde">(UTC-01:00) Cape Verde Is.</option>
    <option value="Africa/Casablanca">(UTC+00:00) Casablanca</option>
    <option value="Europe/London">(UTC+00:00) Edinburgh</option>
    <option value="Etc/Greenwich">(UTC+00:00) Greenwich Mean Time : Dublin</option>
    <option value="Europe/Lisbon">(UTC+00:00) Lisbon</option>
    <option value="Europe/London">(UTC+00:00) London</option>
    <option value="Africa/Monrovia">(UTC+00:00) Monrovia</option>
    <option value="UTC">(UTC+00:00) UTC</option>
    <option value="Europe/Amsterdam">(UTC+01:00) Amsterdam</option>
    <option value="Europe/Belgrade">(UTC+01:00) Belgrade</option>
    <option value="Europe/Berlin">(UTC+01:00) Berlin</option>
    <option value="Europe/Berlin">(UTC+01:00) Bern</option>
    <option value="Europe/Bratislava">(UTC+01:00) Bratislava</option>
    <option value="Europe/Brussels">(UTC+01:00) Brussels</option>
    <option value="Europe/Budapest">(UTC+01:00) Budapest</option>
    <option value="Europe/Copenhagen">(UTC+01:00) Copenhagen</option>
    <option value="Europe/Ljubljana">(UTC+01:00) Ljubljana</option>
    <option value="Europe/Madrid">(UTC+01:00) Madrid</option>
    <option value="Europe/Paris">(UTC+01:00) Paris</option>
    <option value="Europe/Prague">(UTC+01:00) Prague</option>
    <option value="Europe/Rome">(UTC+01:00) Rome</option>
    <option value="Europe/Sarajevo">(UTC+01:00) Sarajevo</option>
    <option value="Europe/Skopje">(UTC+01:00) Skopje</option>
    <option value="Europe/Stockholm">(UTC+01:00) Stockholm</option>
    <option value="Europe/Vienna">(UTC+01:00) Vienna</option>
    <option value="Europe/Warsaw">(UTC+01:00) Warsaw</option>
    <option value="Africa/Lagos">(UTC+01:00) West Central Africa</option>
    <option value="Europe/Zagreb">(UTC+01:00) Zagreb</option>
    <option value="Europe/Athens">(UTC+02:00) Athens</option>
    <option value="Europe/Bucharest">(UTC+02:00) Bucharest</option>
    <option value="Africa/Cairo">(UTC+02:00) Cairo</option>
    <option value="Africa/Harare">(UTC+02:00) Harare</option>
    <option value="Europe/Helsinki">(UTC+02:00) Helsinki</option>
    <option value="Europe/Istanbul">(UTC+02:00) Istanbul</option>
    <option value="Asia/Jerusalem">(UTC+02:00) Jerusalem</option>
    <option value="Europe/Helsinki">(UTC+02:00) Kyiv</option>
    <option value="Africa/Johannesburg">(UTC+02:00) Pretoria</option>
    <option value="Europe/Riga">(UTC+02:00) Riga</option>
    <option value="Europe/Sofia">(UTC+02:00) Sofia</option>
    <option value="Europe/Tallinn">(UTC+02:00) Tallinn</option>
    <option value="Europe/Vilnius">(UTC+02:00) Vilnius</option>
    <option value="Asia/Baghdad">(UTC+03:00) Baghdad</option>
    <option value="Asia/Kuwait">(UTC+03:00) Kuwait</option>
    <option value="Europe/Minsk">(UTC+03:00) Minsk</option>
    <option value="Africa/Nairobi">(UTC+03:00) Nairobi</option>
    <option value="Asia/Riyadh">(UTC+03:00) Riyadh</option>
    <option value="Europe/Volgograd">(UTC+03:00) Volgograd</option>
    <option value="Asia/Tehran">(UTC+03:30) Tehran</option>
    <option value="Asia/Muscat">(UTC+04:00) Abu Dhabi</option>
    <option value="Asia/Baku">(UTC+04:00) Baku</option>
    <option value="Europe/Moscow">(UTC+04:00) Moscow</option>
    <option value="Asia/Muscat">(UTC+04:00) Muscat</option>
    <option value="Europe/Moscow">(UTC+04:00) St. Petersburg</option>
    <option value="Asia/Tbilisi">(UTC+04:00) Tbilisi</option>
    <option value="Asia/Yerevan">(UTC+04:00) Yerevan</option>
    <option value="Asia/Kabul">(UTC+04:30) Kabul</option>
    <option value="Asia/Karachi">(UTC+05:00) Islamabad</option>
    <option value="Asia/Karachi">(UTC+05:00) Karachi</option>
    <option value="Asia/Tashkent">(UTC+05:00) Tashkent</option>
    <option value="Asia/Calcutta">(UTC+05:30) Chennai</option>
    <option value="Asia/Kolkata">(UTC+05:30) Kolkata</option>
    <option value="Asia/Calcutta">(UTC+05:30) Mumbai</option>
    <option value="Asia/Calcutta">(UTC+05:30) New Delhi</option>
    <option value="Asia/Calcutta">(UTC+05:30) Sri Jayawardenepura</option>
    <option value="Asia/Katmandu">(UTC+05:45) Kathmandu</option>
    <option value="Asia/Almaty">(UTC+06:00) Almaty</option>
    <option value="Asia/Dhaka">(UTC+06:00) Astana</option>
    <option value="Asia/Dhaka">(UTC+06:00) Dhaka</option>
    <option value="Asia/Yekaterinburg">(UTC+06:00) Ekaterinburg</option>
    <option value="Asia/Rangoon">(UTC+06:30) Rangoon</option>
    <option value="Asia/Bangkok">(UTC+07:00) Bangkok</option>
    <option value="Asia/Bangkok">(UTC+07:00) Hanoi</option>
    <option value="Asia/Jakarta">(UTC+07:00) Jakarta</option>
    <option value="Asia/Novosibirsk">(UTC+07:00) Novosibirsk</option>
    <option value="Asia/Hong_Kong">(UTC+08:00) Beijing</option>
    <option value="Asia/Chongqing">(UTC+08:00) Chongqing</option>
    <option value="Asia/Hong_Kong">(UTC+08:00) Hong Kong</option>
    <option value="Asia/Krasnoyarsk">(UTC+08:00) Krasnoyarsk</option>
    <option value="Asia/Kuala_Lumpur">(UTC+08:00) Kuala Lumpur</option>
    <option value="Australia/Perth">(UTC+08:00) Perth</option>
    <option value="Asia/Singapore">(UTC+08:00) Singapore</option>
    <option value="Asia/Taipei">(UTC+08:00) Taipei</option>
    <option value="Asia/Ulan_Bator">(UTC+08:00) Ulaan Bataar</option>
    <option value="Asia/Urumqi">(UTC+08:00) Urumqi</option>
    <option value="Asia/Irkutsk">(UTC+09:00) Irkutsk</option>
    <option value="Asia/Tokyo">(UTC+09:00) Osaka</option>
    <option value="Asia/Tokyo">(UTC+09:00) Sapporo</option>
    <option value="Asia/Seoul">(UTC+09:00) Seoul</option>
    <option value="Asia/Tokyo">(UTC+09:00) Tokyo</option>
    <option value="Australia/Adelaide">(UTC+09:30) Adelaide</option>
    <option value="Australia/Darwin">(UTC+09:30) Darwin</option>
    <option value="Australia/Brisbane">(UTC+10:00) Brisbane</option>
    <option value="Australia/Canberra">(UTC+10:00) Canberra</option>
    <option value="Pacific/Guam">(UTC+10:00) Guam</option>
    <option value="Australia/Hobart">(UTC+10:00) Hobart</option>
    <option value="Australia/Melbourne">(UTC+10:00) Melbourne</option>
    <option value="Pacific/Port_Moresby">(UTC+10:00) Port Moresby</option>
    <option value="Australia/Sydney">(UTC+10:00) Sydney</option>
    <option value="Asia/Yakutsk">(UTC+10:00) Yakutsk</option>
    <option value="Asia/Vladivostok">(UTC+11:00) Vladivostok</option>
    <option value="Pacific/Auckland">(UTC+12:00) Auckland</option>
    <option value="Pacific/Fiji">(UTC+12:00) Fiji</option>
    <option value="Pacific/Kwajalein">(UTC+12:00) International Date Line West</option>
    <option value="Asia/Kamchatka">(UTC+12:00) Kamchatka</option>
    <option value="Asia/Magadan">(UTC+12:00) Magadan</option>
    <option value="Pacific/Fiji">(UTC+12:00) Marshall Is.</option>
    <option value="Asia/Magadan">(UTC+12:00) New Caledonia</option>
    <option value="Asia/Magadan">(UTC+12:00) Solomon Is.</option>
    <option value="Pacific/Auckland">(UTC+12:00) Wellington</option>
    <option value="Pacific/Tongatapu">(UTC+13:00) Nuku'alofa</option>
    </select>
        </p>
    </div>

    <p>
        <input type='submit' value='Ready? Click to Install Kilvin CMS!' class='submit'>
    </p>

    </form>

{% endblock mainContent %}


{% block bottomJavascript %}

    <script type='text/javascript'>

    $(document).ready(function() {

        var timezone = window.moment.tz.guess();
        var selectedTimezone = '{{site_timezone}}';

        if (selectedTimezone) {
            $('select[name=site_timezone]').val(selectedTimezone);
        } else if (timezone && $('select[name=site_timezone] option[value=' + timezone.replace('/', '\\/') + ']').length > 0) {
            $('select[name=site_timezone]').val(timezone);
        } else {
            var offset = moment("2017-01-12").tz(timezone).format('Z');
            var results = $("select[name=site_timezone] option:contains('"+offset+"')").attr('selected', 'selected');
        }


        $('input[name=password]').keyup(function(e){

            var pwd = $(e.currentTarget).val();

            if (pwd.length == 0) {
                $('#js-password-strength').html('Non-existent.');
                return;
            }

            var feedback = zxcvbn($(e.currentTarget).val());

            if (feedback.score == 0 || feedback.score == 1) {
                var response = '<span style="color: #cc0000;">Weak</span>';
            }

            if (feedback.score == 2) {
                var response = '<span style="color: #f57900;">Fair</span>';
            }

            if (feedback.score == 3) {
                var response = '<span style="color: #e94ffc;">Good</span>';
            }

            if (feedback.score == 4) {
                var response = '<span style="color: #457E0D;">Strong!</span>';
            }

            if (feedback.feedback.warning) {
                response += ' (' + feedback.feedback.warning + ')';
            }

            $('#js-password-strength').html(response);
        });
    });


    </script>

{% endblock bottomJavascript %}

